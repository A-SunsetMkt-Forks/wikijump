# -- UTILITY

update: npm i && run-s -s lerna:clean clean bootstrap build
bootstrap: lerna bootstrap --hoist --loglevel success
lerna:clean: lerna clean --yes --loglevel success
clean: ultra --silent -r clean

# -- BUILD

build:cmd:packages:
  - tsc -b
  - ultra -r --raw --filter "modules/*" build
  - ultra -r --raw --filter components build

build:cmd:
  - npm run build:cmd:packages
  - ultra -r --no-pretty --filter "web/*" build

build: ultra --build build:cmd

rebuild: run-s -s clean build

# -- DEV

dev:cmd:
  - tsc -b -w
  - node scripts/build-modules.js -w -g
  - ultra --raw -r --filter components dev

dev: ultra dev:cmd

# -- TESTING, LINTING

test:
  modules:
    - node scripts/build-modules.js -tests
    - uvu modules tests[/\\\\]dist
  components:
    - node scripts/build-components.js -tests
    - uvu components tests[/\\\\]dist

lint:
  eslint: eslint "./**/*.js" "./**/*.ts"
  prettier: prettier --check "modules/" "web/"
  fix:
    eslint: eslint "./**/*.js" "./**/*.ts" --fix
    prettier: prettier --write "modules/" "web/"

# -- MISC.

dev:dev-sandbox:cmd:
  - ultra --silent dev:cmd
  - ultra --raw -r --filter "web/dev-sandbox" dev

dev:dev-sandbox: ultra --no-pretty dev:dev-sandbox:cmd
