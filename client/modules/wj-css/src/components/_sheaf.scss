:root {
  /// Font applied widely within the editor.
  --sheaf-font: var(--font-mono);
  /// Font size of the content (as in the editable document) within the editor.
  --sheaf-font-size: 13px;
}

.cm-editor {
  color: var(--colcode-content);
  background-color: var(--colcode-background);
  caret-color: var(--colcode-accent);
  height: 100%;
  width: 100%;

  .cm-scroller {
    position: relative;
    font-family: var(--sheaf-font);
    font-size: var(--sheaf-font-size);
    font-weight: 400;
    overflow-x: auto;
    z-index: 0;
  }

  .cm-content {
    max-width: 45rem;
    line-height: 1.4;
    padding-bottom: 70vh;
  }

  .cm-gutters {
    background-color: var(--colcode-background);
    color: var(--colcode-comment);
    border: none;
  }

  .cm-gutterElement.lineNumber {
    color: inherit;
  }

  .cm-foldPlaceholder {
    background: var(--colcode-commentdoc);
    border: none;
    padding: 0 0.5rem;
    margin: 0 0.25rem;
    color: var(--colcode-content);
  }

  .cm-button {
    border: 1px solid var(--colcode-border);
    background: none;
  }

  .cm-textfield {
    border: 1px solid var(--colcode-border);
  }

  ::selection {
    background-color: var(--colcode-selection);
    color: var(--colcode-content);
  }

  .cm-line {
    ::selection,
    &::selection {
      color: inherit !important;
    }
  }

  .cm-activeLine {
    background-color: var(--colcode-hover);
  }

  .cm-selectionBackground {
    background-color: var(--colcode-selection);
  }

  .cm-selectionMatch {
    background-color: var(--colcode-selection);
  }

  .cm-searchMatch {
    background-color: var(--colcode-selection);
    border-radius: 0.125rem;

    &.selected {
      background-color: var(--colcode-selection);
      box-shadow: 0 0 0 0.075rem var(--colcode-accent);
    }
  }

  .cm-matchingBracket,
  .cm-nonmatchingBracket {
    background-color: var(--colcode-hover);
    outline: 1px solid var(--colcode-selection);
  }

  &.cm-focused {
    outline: none;

    .cm-cursor {
      border-left-color: var(--colcode-accent);
    }

    @include tolerates-motion {
      // Makes the mouse cursor smooth
      .cm-cursorLayer {
        animation: cubic-bezier(0.95, 0, 0.05, 1) cm-blink 1.2s infinite;
      }

      .cm-cursor {
        transition: left 0.05s ease-out, top 0.05s ease-out;
      }
    }
  }
}

.cm-editor .cm-tooltip {
  border: 1px solid var(--colcode-border);
  background-color: var(--colcode-background);

  @include tolerates-motion {
    animation: cm-tooltip-fadein 0.125s 1 0s backwards ease-out;
  }

  .cm-completionInfo {
    max-width: 30rem;
  }

  .cm-completionIcon {
    line-height: 0;
    font-size: 1.25em;
    width: 1em;
    padding-right: 0.25em;
    color: var(--colcode-keyword);
    opacity: 1;
  }

  .cm-tooltip-autocomplete {
    animation: none;

    & > ul > li {
      font-family: var(--sheaf-font);
      font-size: 0.875em;
      color: var(--colcode-content);

      &[aria-selected] {
        background-color: var(--colcode-selection);
        color: var(--colcode-content);
      }
    }
  }
}

.cm-editor {
  .cm-panels-top {
    border-bottom: 2px solid var(--colcode-border);
  }

  .cm-panels-bottom {
    border-top: 2px solid var(--colcode-border);
  }

  .cm-panels {
    background-color: var(--col-background);
    color: var(--colcode-content);
  }
}

.cm-editor .cm-panel {
  .cm-panel-lint ul {
    max-height: 16rem;
    outline: none;
    padding-right: 0.5rem;

    &:focus [aria-selected] {
      background-color: var(--colcode-accent);
    }

    > li {
      margin-bottom: 0.25rem;
      transition: background-color 0.075s ease;
      cursor: pointer;

      &:hover,
      &[aria-selected] {
        background-color: var(--colcode-hover);
      }
    }
  }
}

// prettier-ignore
@keyframes cm-blink {
  0% {}
  50% { opacity: 0; }
  100% {}
}

// prettier-ignore
@keyframes cm-blink2 {
  0% {}
  50% { opacity: 0; }
  100% {}
}

// prettier-ignore
@keyframes cm-tooltip-fadein {
  0% { opacity: 0 ;}
  100% { opacity: 1; }
}
